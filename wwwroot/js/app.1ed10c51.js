(function(t){function e(e){for(var s,n,l=e[0],o=e[1],u=e[2],p=0,d=[];p<l.length;p++)n=l[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(t[s]=o[s]);c&&c(e);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(s=!1)}s&&(i.splice(e--,1),t=n(n.s=a[0]))}return t}var s={},r={app:0},i=[];function n(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=t,n.c=s,n.d=function(t,e,a){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(a,s,function(e){return t[e]}.bind(null,s));return a},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var c=o;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"09e0":function(t,e,a){},"2b56":function(t,e,a){"use strict";var s=a("09e0"),r=a.n(s);r.a},"56d7":function(t,e,a){"use strict";a.r(e);var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("navbar"),a("router-view")],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"home"}}},[t._v("Keepr")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarText"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item",class:{active:"home"==t.$route.name}},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"}}},[t._v("Home")])],1),t.$auth.isAuthenticated?a("li",{staticClass:"nav-item",class:{active:"dashboard"==t.$route.name}},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"dashboard"}}},[t._v("My Dashboard")])],1):t._e()]),a("span",{staticClass:"navbar-text"},[t.$auth.isAuthenticated?a("button",{staticClass:"btn btn-danger",on:{click:t.logout}},[t._v("Logout")]):a("button",{staticClass:"btn btn-success",on:{click:t.login}},[t._v("Login")])])])],1)},l=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],o=a("bc3a"),u=a.n(o);u.a.create({baseURL:"https://localhost:5001",withCredentials:!0});var c={name:"Navbar",methods:{async login(){await this.$auth.loginWithPopup(),this.$store.dispatch("setBearer",this.$auth.bearer),console.log("this.$auth.user: "),console.log(this.$auth.user)},async logout(){this.$store.dispatch("resetBearer"),await this.$auth.logout({returnTo:window.location.origin})}}},p=c,d=(a("7e34"),a("2877")),m=Object(d["a"])(p,n,l,!1,null,"6ad2a43c",null),v=m.exports,h=a("335d"),b={name:"App",async beforeCreate(){this.$store.dispatch("getPublicKeeps"),await Object(h["c"])(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getUserKeeps"),this.$store.dispatch("getUserVaults")},components:{Navbar:v}},f=b,g=(a("5c0b"),Object(d["a"])(f,r,i,!1,null,null,null)),K=g.exports,C=a("8c4f"),w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"home"},[a("div",{staticClass:"container-fluid"},[t._m(0),this.$auth.isAuthenticated?a("div",{staticClass:"row"},t._l(t.keeps,(function(t){return a("keep",{key:t.id,attrs:{keepData:t,canKeep:!0}})})),1):a("div",{staticClass:"row"},t._l(t.keeps,(function(t){return a("keep",{key:t.id,attrs:{keepData:t,canKeep:!1}})})),1)])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center text-light py-4"},[a("h1",[t._v("Welcome To Keepr!")])])])}],k=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 col-md-3 pb-2"},[a("div",{staticClass:"keep-container row",on:{mouseenter:function(e){return t.viewKeep(t.keepData)}}},[a("img",{staticClass:"image",attrs:{src:t.keepData.img}}),a("div",{staticClass:"middle text-light text-center col-12"},[a("h4",[t._v(t._s(t.keepData.name))]),a("p",[t._v(t._s(t.keepData.description))]),"vault view"==t.$route.name?a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.removeFromVault(t.keepData.vaultKeepId)}}},[t._v("Remove from Vault")]):t._e(),t.keepData.userId==this.$auth.userInfo.sub&&t.keepData.isPrivate?a("div",[a("button",{staticClass:"btn btn-sm btn-danger mt-1",on:{click:function(e){return t.deleteKeep(t.keepData)}}},[t._v("Delete Keep")])]):t._e(),a("div",{staticClass:"bottom row pb-3"},[t.canKeep?a("div",{staticClass:"col-12 mb-1"},[a("form",{staticClass:"ml-4 mb-1 form-inline",attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.createVaultKeep(t.keepData)}}},[a("div",{staticClass:"form-group"},[a("label",[t._v("Keep it:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:t.newVaultKeep.vaultId,expression:"newVaultKeep.vaultId"}],staticClass:"mx-2 form-control-sm",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.newVaultKeep,"vaultId",e.target.multiple?a:a[0])}}},t._l(t.userVaults,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])})),0),a("button",{staticClass:"btn btn-sm btn-success px-1 py-0",attrs:{type:"submit"}},[t._v("+")])])])]):t._e(),a("span",{staticClass:"col-4"},[t._v("Keeps: "+t._s(t.keepData.keeps))]),a("span",{staticClass:"col-4"},[a("i",{staticClass:"fas fa-share-alt-square"}),t._v(" : "+t._s(t.keepData.shares)+" ")]),a("span",{staticClass:"col-4"},[a("i",{staticClass:"far fa-eye"}),t._v(" : "+t._s(t.keepData.views)+" ")])])])])])},V=[],$={name:"Keep",props:["canKeep","keepData","index"],data(){return{newVaultKeep:{keepId:"",vaultId:""}}},mounted(){},computed:{userVaults(){return this.$store.state.userVaults}},methods:{deleteKeep(t){this.$store.dispatch("deleteKeep",t)},createVaultKeep(t){this.newVaultKeep.keepId=t.id,this.$store.dispatch("createVaultKeep",this.newVaultKeep),t.keeps++,this.$store.dispatch("updateKeepCounts",t)},viewKeep(t){t.views++,this.$store.dispatch("updateKeepCounts",t)},removeFromVault(t){this.$store.dispatch("deleteVaultKeep",t)}}},y=$,x=(a("da6a"),Object(d["a"])(y,k,V,!1,null,"5796559c",null)),D=x.exports,I={name:"home",data(){return{}},beforeCreate(){this.$store.dispatch("getPublicKeeps")},mounted(){this.$auth.isAuthenticated&&this.$store.dispatch("getUserVaults")},components:{Keep:D},computed:{user(){return this.$store.state.user},keeps(){return this.$store.state.publicKeeps}},methods:{logout(){this.$store.dispatch("logout")}}},P=I,O=Object(d["a"])(P,w,_,!1,null,null,null),E=O.exports,j=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"dashboard"},[a("div",{staticClass:"text-center bg-secondary mb-2"},[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"Dashboard keeps"==t.$route.name},attrs:{to:{name:"Dashboard keeps"}}},[t._v("My Keeps")])],1),a("li",[a("router-link",{staticClass:"nav-link",class:{active:"Dashboard vaults"==t.$route.name},attrs:{to:{name:"Dashboard vaults"}}},[t._v("My Vaults")])],1)])]),"dashboard"==t.$route.name?a("div",{staticClass:"text-light text-center py-4"},[a("h1",[t._v("WELCOME TO YOUR DASHBOARD")])]):"Dashboard keeps"==t.$route.name?a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-block btn-info mb-2",attrs:{type:"button","data-toggle":"modal","data-target":"#keep-form"}},[t._v("Create New Keep")]),a("div",{staticClass:"modal fade",attrs:{id:"keep-form",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.createKeep(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nameInput"}},[t._v("Keep Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newKeep.name,expression:"newKeep.name"}],staticClass:"form-control",attrs:{type:"text",id:"nameInput",placeholder:"Enter Keep Name..",required:""},domProps:{value:t.newKeep.name},on:{input:function(e){e.target.composing||t.$set(t.newKeep,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"descInput"}},[t._v("Keep Description")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newKeep.description,expression:"newKeep.description"}],staticClass:"form-control",attrs:{type:"text",id:"descInput",placeholder:"Description..",required:""},domProps:{value:t.newKeep.description},on:{input:function(e){e.target.composing||t.$set(t.newKeep,"description",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"imgInput"}},[t._v("Keep Img Url")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newKeep.img,expression:"newKeep.img"}],staticClass:"form-control",attrs:{value:"null",type:"text",id:"imgInput",placeholder:"Img URL.."},domProps:{value:t.newKeep.img},on:{input:function(e){e.target.composing||t.$set(t.newKeep,"img",e.target.value)}}})]),a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",attrs:{for:"privateCheck"}},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"privateCheck"},on:{click:function(e){t.newKeep.isPrivate=!t.newKeep.isPrivate}}}),t._v("Keep this private? "),t.newKeep.isPrivate?t.newKeep.isPrivate?a("span",{staticClass:"bg-dark text-success rounded p-1"},[t._v("Your keep will be kept private!")]):t._e():a("span",{staticClass:"bg-dark text-warning rounded p-1"},[t._v("Warning: Public Keeps cannot be deleted!")])])]),a("small",[t._v("Private Keeps will not be displayed on the homepage")]),t._m(1)])])])])])]),t._l(t.userKeeps,(function(t,e,s){return a("keep",{key:t.id,attrs:{index:s,keepData:t,canKeep:!0}})}))],2)]):"Dashboard vaults"==t.$route.name?a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-block btn-info mb-2",attrs:{type:"button","data-toggle":"modal","data-target":"#vault-form"}},[t._v("Create New Vault")]),a("div",{staticClass:"modal fade",attrs:{id:"vault-form",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[t._m(2),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(e){return e.preventDefault(),t.createVault(e)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"vaultNameInput"}},[t._v("Vault Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newVault.name,expression:"newVault.name"}],staticClass:"form-control",attrs:{type:"text",id:"vaultNameInput",placeholder:"Enter Vault Name..",required:""},domProps:{value:t.newVault.name},on:{input:function(e){e.target.composing||t.$set(t.newVault,"name",e.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"vaultDescInput"}},[t._v("Vault Description")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.newVault.description,expression:"newVault.description"}],staticClass:"form-control",attrs:{type:"text",id:"vaultDescInput",placeholder:"Description..",required:""},domProps:{value:t.newVault.description},on:{input:function(e){e.target.composing||t.$set(t.newVault,"description",e.target.value)}}})]),t._m(3)])])])])])]),t._l(t.userVaults,(function(e){return a("div",{key:e.id,staticClass:"col-3 my-1",attrs:{vaultData:e}},[a("div",{staticClass:"card"},[a("router-link",{attrs:{to:{name:"vault view",params:{vaultId:e.id}}}},[a("img",{staticClass:"card-img-top",attrs:{src:"https://www.gleason-group.net/wp-content/uploads/2018/03/vault-1.jpg"}})]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[t._v(t._s(e.name))]),a("p",{staticClass:"card-text"},[t._v(t._s(e.description))]),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return t.deleteVault(e.id)}}},[t._v("Delete")])])],1)])}))],2)]):t._e()])},U=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v("Create a new Keep")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Keep It!")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[t._v("Create a new Vault")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[t._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[t._v("Vault Em!")])])}],N=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"col-12 text-center mt-2"},[a("div",{staticClass:"text-light my-3"},[a("h1",[t._v(t._s(t.activeVault.name))]),a("h3",[t._v(t._s(t.activeVault.description))])]),t.vaultKeeps.length>0?a("div",{staticClass:"row"},t._l(t.vaultKeeps,(function(t,e,s){return a("keep",{key:t.vaultKeepId,attrs:{index:s,keepData:t,canKeep:!1}})})),1):a("div",{staticClass:"row"},[t._m(0)])])])},A=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"col-12 text-center text-light mt-5"},[a("h3",[t._v("Your Kept keeps will appear here!")])])}],T={name:"Vault",async beforeCreate(){await Object(h["c"])(),this.$store.dispatch("getUserVaults"),this.$store.dispatch("setActiveVault",this.$route.params.vaultId),this.$store.dispatch("getKeepsByVaultId",this.$route.params.vaultId)},computed:{vaultKeeps(){return this.$store.state.vaultKeeps},activeVault(){return this.$store.state.activeVault}},components:{Keep:D}},M=T,B=Object(d["a"])(M,N,A,!1,null,null,null),L=B.exports,R={name:"dashboard",async beforeCreate(){this.$store.dispatch("getPublicKeeps"),await Object(h["c"])(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getUserKeeps"),this.$store.dispatch("getUserVaults")},data(){return{newKeep:{name:"",description:"",img:null,isPrivate:!1},newVault:{name:"",description:""}}},mounted(){},methods:{createKeep(){this.$store.dispatch("createKeep",this.newKeep),this.newKeep.img||(this.newKeep.img="https://bonitaselfdefense.com/wp-content/uploads/2017/04/default-image.jpg"),this.newKeep={name:"",description:"",img:null,isPrivate:!1}},createVault(){this.$store.dispatch("createVault",this.newVault),this.newVault={name:"",description:""},console.log(this.$store.state.userVaults)},deleteVault(t){this.$store.dispatch("deleteVault",t)}},computed:{publicKeeps(){return this.$store.state.publicKeeps},userKeeps(){return this.$store.state.userKeeps},userVaults(){return this.$store.state.userVaults}},components:{Keep:D}},S=R,q=(a("2b56"),Object(d["a"])(S,j,U,!1,null,null,null)),W=q.exports;s["a"].use(C["a"]);var z=new C["a"]({routes:[{path:"/",name:"home",component:E},{path:"/dashboard",name:"dashboard",component:W,beforeEnter:h["b"]},{path:"/dashboard/keeps",name:"Dashboard keeps",component:W,beforeEnter:h["b"]},{path:"/dashboard/vaults",name:"Dashboard vaults",component:W,beforeEnter:h["b"]},{path:"/dashboard/vaults/:vaultId",name:"vault view",component:L,beforeEnter:h["b"]}]}),Y=a("2f62");s["a"].use(Y["a"]);let F=location.host.includes("localhost")?"https://localhost:5001/":"/",H=u.a.create({baseURL:F+"api/",timeout:3e3,withCredentials:!0});var J=new Y["a"].Store({state:{publicKeeps:[],userKeeps:[],vaultKeeps:[],userVaults:[],activeVault:{}},mutations:{setPublicKeeps(t,e){t.publicKeeps=e},setUserKeeps(t,e){t.userKeeps=e},addKeep(t,e){t.userKeeps.push(e),e.isPrivate||t.publicKeeps.push(e)},removeKeep(t,e){t.publicKeeps=t.publicKeeps.filter(t=>t.id!=e),t.userKeeps=t.userKeeps.filter(t=>t.id!=e)},setUserVaults(t,e){t.userVaults=e},addVault(t,e){t.userVaults.push(e)},removeVault(t,e){t.userVaults=t.userVaults.filter(t=>t.id!=e)},setActiveVault(t,e){t.activeVault=e},setVaultKeeps(t,e){t.vaultKeeps=e},addVaultKeep(t,e){t.vaultKeeps.push(e)},removeVaultKeep(t,e){t.vaultKeeps=t.vaultKeeps.filter(t=>t.vaultKeepId!=e)}},actions:{setBearer({},t){H.defaults.headers.authorization=t},resetBearer(){H.defaults.headers.authorization=""},async getPublicKeeps({commit:t}){let e=await H.get("keeps");t("setPublicKeeps",e.data)},async getUserKeeps({commit:t}){let e=await H.get("keeps/mykeeps");t("setUserKeeps",e.data)},async createKeep({commit:t},e){let a=await H.post("keeps",e);t("addKeep",a.data)},async deleteKeep({commit:t},e){await H.delete(`keeps/${e.id}`);t("removeKeep",e.id)},async updateKeepCounts({commit:t,dispatch:e},a){await H.put(`keeps/${a.id}/counts`,a)},async getUserVaults({commit:t}){let e=await H.get("vaults");t("setUserVaults",e.data)},async createVault({commit:t},e){let a=await H.post("vaults",e);t("addVault",a.data)},async deleteVault({commit:t},e){await H.delete(`vaults/${e}`);t("removeVault",e)},async setActiveVault({commit:t},e){let a=await H.get(`vaults/${e}`);t("setActiveVault",a.data)},async createVaultKeep({commit:t},e){let a=await H.post("vaultkeeps",e);t("addVaultKeep",a.data)},async getKeepsByVaultId({commit:t},e){let a=await H.get(`vaults/${e}/keeps`);t("setVaultKeeps",a.data)},async deleteVaultKeep({commit:t},e){await H.delete(`vaultkeeps/${e}`);t("removeVaultKeep",e)}}});const Z="dev-och048iy.auth0.com",G="https//Keepr.com",Q="L6Cp1dehi5y4KqC4DUEzIvOeIjsO2ZmO";s["a"].use(h["a"],{domain:Z,clientId:Q,audience:G,onRedirectCallback:t=>{z.push(t&&t.targetUrl?t.targetUrl:window.location.pathname)}}),new s["a"]({router:z,store:J,render:function(t){return t(K)}}).$mount("#app")},"5c0b":function(t,e,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"63e4":function(t,e,a){},"7e34":function(t,e,a){"use strict";var s=a("f41f"),r=a.n(s);r.a},"9c0c":function(t,e,a){},da6a:function(t,e,a){"use strict";var s=a("63e4"),r=a.n(s);r.a},f41f:function(t,e,a){}});