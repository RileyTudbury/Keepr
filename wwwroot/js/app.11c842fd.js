(function(e){function t(t){for(var s,n,l=t[0],o=t[1],u=t[2],p=0,d=[];p<l.length;p++)n=l[p],Object.prototype.hasOwnProperty.call(r,n)&&r[n]&&d.push(r[n][0]),r[n]=0;for(s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s]);c&&c(t);while(d.length)d.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var e,t=0;t<i.length;t++){for(var a=i[t],s=!0,l=1;l<a.length;l++){var o=a[l];0!==r[o]&&(s=!1)}s&&(i.splice(t--,1),e=n(n.s=a[0]))}return e}var s={},r={app:0},i=[];function n(t){if(s[t])return s[t].exports;var a=s[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=s,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(a,s,function(t){return e[t]}.bind(null,s));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],o=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var c=o;i.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"09e0":function(e,t,a){},"2b56":function(e,t,a){"use strict";var s=a("09e0"),r=a.n(s);r.a},"56d7":function(e,t,a){"use strict";a.r(t);var s=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("navbar"),a("router-view")],1)},i=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",{staticClass:"navbar navbar-expand-lg navbar-light bg-light"},[a("router-link",{staticClass:"navbar-brand",attrs:{to:{name:"home"}}},[e._v("Keepr")]),e._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarText"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item",class:{active:"home"==e.$route.name}},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"home"}}},[e._v("Home")])],1),e.$auth.isAuthenticated?a("li",{staticClass:"nav-item",class:{active:"dashboard"==e.$route.name}},[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"dashboard"}}},[e._v("My Dashboard")])],1):e._e()]),a("span",{staticClass:"navbar-text"},[e.$auth.isAuthenticated?a("button",{staticClass:"btn btn-danger",on:{click:e.logout}},[e._v("Logout")]):a("button",{staticClass:"btn btn-success",on:{click:e.login}},[e._v("Login")])])])],1)},l=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],o=a("bc3a"),u=a.n(o);u.a.create({baseURL:"https://localhost:5001",withCredentials:!0});var c={name:"Navbar",methods:{async login(){await this.$auth.loginWithPopup(),this.$store.dispatch("setBearer",this.$auth.bearer),console.log("this.$auth.user: "),console.log(this.$auth.user)},async logout(){this.$store.dispatch("resetBearer"),await this.$auth.logout({returnTo:window.location.origin})}}},p=c,d=(a("7e34"),a("2877")),m=Object(d["a"])(p,n,l,!1,null,"6ad2a43c",null),v=m.exports,h=a("335d"),b={name:"App",async beforeCreate(){this.$store.dispatch("getPublicKeeps"),await Object(h["c"])(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getUserKeeps"),this.$store.dispatch("getUserVaults")},components:{Navbar:v}},f=b,g=(a("5c0b"),Object(d["a"])(f,r,i,!1,null,null,null)),K=g.exports,C=a("8c4f"),w=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"home"},[a("div",{staticClass:"container-fluid"},[e._m(0),this.$auth.isAuthenticated?a("div",{staticClass:"row"},e._l(e.keeps,(function(e){return a("keep",{key:e.id,attrs:{keepData:e,canKeep:!0}})})),1):a("div",{staticClass:"row"},e._l(e.keeps,(function(e){return a("keep",{key:e.id,attrs:{keepData:e,canKeep:!1}})})),1)])])},_=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row"},[a("div",{staticClass:"col-12 text-center text-light py-4"},[a("h1",[e._v("Welcome To Keepr!")])])])}],k=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 col-md-3 pb-2"},[a("div",{staticClass:"card"},[e.userVaults.length>0&&e.canKeep?a("div",{staticClass:"card-header"},[a("form",{staticClass:"form-inline",attrs:{action:""},on:{submit:function(t){return t.preventDefault(),e.createVaultKeep(e.keepData)}}},[a("div",{staticClass:"form-group"},[a("label",[e._v("Keep it:")]),a("select",{directives:[{name:"model",rawName:"v-model",value:e.newVaultKeep.vaultId,expression:"newVaultKeep.vaultId"}],staticClass:"mx-2 form-control-sm",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.newVaultKeep,"vaultId",t.target.multiple?a:a[0])}}},e._l(e.userVaults,(function(t){return a("option",{key:t.id,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)]),a("button",{staticClass:"btn btn-sm btn-success",attrs:{type:"submit"}},[e._v("+")])])]):"vault view"==e.$route.name?a("div",{staticClass:"card-header"},[e._v(" Remove from Vault "),a("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(t){return e.removeFromVault(e.keepData.vaultKeepId)}}},[e._v("X")])]):e._e(),a("img",{staticClass:"card-img-top",attrs:{src:e.keepData.img},on:{click:function(t){return e.viewKeep(e.keepData)}}}),a("p",{staticClass:"card-header"},[e._v(e._s(e.keepData.name))]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[e._v(e._s(e.keepData.description))]),a("span",[e._v(" Shares: "+e._s(e.keepData.shares)+" Keeps: "+e._s(e.keepData.keeps)+" Views: "+e._s(e.keepData.views)+" ")]),e.keepData.userId==this.$auth.userInfo.sub&&e.keepData.isPrivate?a("div",[a("button",{staticClass:"btn btn-sm btn-danger mt-1",on:{click:function(t){return e.deleteKeep(e.keepData.id)}}},[e._v("Delete Keep")])]):e._e()])])])},V=[],$={name:"Keep",props:["canKeep","keepData","index"],data(){return{newVaultKeep:{keepId:"",vaultId:""}}},mounted(){},computed:{userVaults(){return this.$store.state.userVaults}},methods:{deleteKeep(e){this.$store.dispatch("deleteKeep",e)},createVaultKeep(e){this.newVaultKeep.keepId=e.id,this.$store.dispatch("createVaultKeep",this.newVaultKeep),e.keeps++,this.$store.dispatch("updateKeepCounts",e)},viewKeep(e){e.views++,this.$store.dispatch("updateKeepCounts",e)},removeFromVault(e){this.$store.dispatch("deleteVaultKeep",e)}}},y=$,x=(a("76eb"),Object(d["a"])(y,k,V,!1,null,null,null)),D=x.exports,I={name:"home",data(){return{}},beforeCreate(){this.$store.dispatch("getPublicKeeps")},components:{Keep:D},computed:{user(){return this.$store.state.user},keeps(){return this.$store.state.publicKeeps}},methods:{logout(){this.$store.dispatch("logout")}}},P=I,O=Object(d["a"])(P,w,_,!1,null,null,null),E=O.exports,j=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("div",{staticClass:"text-center bg-secondary mb-2"},[a("ul",{staticClass:"nav nav-tabs"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",class:{active:"Dashboard keeps"==e.$route.name},attrs:{to:{name:"Dashboard keeps"}}},[e._v("My Keeps")])],1),a("li",[a("router-link",{staticClass:"nav-link",class:{active:"Dashboard vaults"==e.$route.name},attrs:{to:{name:"Dashboard vaults"}}},[e._v("My Vaults")])],1)])]),"dashboard"==e.$route.name?a("div",{staticClass:"text-light text-center py-4"},[a("h1",[e._v("WELCOME TO YOUR DASHBOARD")])]):"Dashboard keeps"==e.$route.name?a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-block btn-info mb-2",attrs:{type:"button","data-toggle":"modal","data-target":"#keep-form"}},[e._v("Create New Keep")]),a("div",{staticClass:"modal fade",attrs:{id:"keep-form",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(0),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createKeep(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"nameInput"}},[e._v("Keep Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newKeep.name,expression:"newKeep.name"}],staticClass:"form-control",attrs:{type:"text",id:"nameInput",placeholder:"Enter Keep Name..",required:""},domProps:{value:e.newKeep.name},on:{input:function(t){t.target.composing||e.$set(e.newKeep,"name",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"descInput"}},[e._v("Keep Description")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newKeep.description,expression:"newKeep.description"}],staticClass:"form-control",attrs:{type:"text",id:"descInput",placeholder:"Description..",required:""},domProps:{value:e.newKeep.description},on:{input:function(t){t.target.composing||e.$set(e.newKeep,"description",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"imgInput"}},[e._v("Keep Img Url")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newKeep.img,expression:"newKeep.img"}],staticClass:"form-control",attrs:{value:"null",type:"text",id:"imgInput",placeholder:"Img URL.."},domProps:{value:e.newKeep.img},on:{input:function(t){t.target.composing||e.$set(e.newKeep,"img",t.target.value)}}})]),a("div",{staticClass:"form-check"},[a("label",{staticClass:"form-check-label",attrs:{for:"privateCheck"}},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"privateCheck"},on:{click:function(t){e.newKeep.isPrivate=!e.newKeep.isPrivate}}}),e._v("Keep this private? "),e.newKeep.isPrivate?e.newKeep.isPrivate?a("span",{staticClass:"bg-dark text-success rounded p-1"},[e._v("Your keep will be kept private!")]):e._e():a("span",{staticClass:"bg-dark text-warning rounded p-1"},[e._v("Warning: Public Keeps cannot be deleted!")])])]),a("small",[e._v("Private Keeps will not be displayed on the homepage")]),e._m(1)])])])])])]),e._l(e.userKeeps,(function(e,t,s){return a("keep",{key:e.id,attrs:{index:s,keepData:e,canKeep:!0}})}))],2)]):"Dashboard vaults"==e.$route.name?a("div",{staticClass:"container-fluid"},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("button",{staticClass:"btn btn-block btn-info mb-2",attrs:{type:"button","data-toggle":"modal","data-target":"#vault-form"}},[e._v("Create New Vault")]),a("div",{staticClass:"modal fade",attrs:{id:"vault-form",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog modal-dialog-centered",attrs:{role:"document"}},[a("div",{staticClass:"modal-content"},[e._m(2),a("div",{staticClass:"modal-body"},[a("form",{on:{submit:function(t){return t.preventDefault(),e.createVault(t)}}},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"vaultNameInput"}},[e._v("Vault Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newVault.name,expression:"newVault.name"}],staticClass:"form-control",attrs:{type:"text",id:"vaultNameInput",placeholder:"Enter Vault Name..",required:""},domProps:{value:e.newVault.name},on:{input:function(t){t.target.composing||e.$set(e.newVault,"name",t.target.value)}}})]),a("div",{staticClass:"form-group"},[a("label",{attrs:{for:"vaultDescInput"}},[e._v("Vault Description")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.newVault.description,expression:"newVault.description"}],staticClass:"form-control",attrs:{type:"text",id:"vaultDescInput",placeholder:"Description..",required:""},domProps:{value:e.newVault.description},on:{input:function(t){t.target.composing||e.$set(e.newVault,"description",t.target.value)}}})]),e._m(3)])])])])])]),e._l(e.userVaults,(function(t){return a("div",{key:t.id,staticClass:"col-3 my-1",attrs:{vaultData:t}},[a("div",{staticClass:"card"},[a("router-link",{attrs:{to:{name:"vault view",params:{vaultId:t.id}}}},[a("img",{staticClass:"card-img-top",attrs:{src:"https://www.gleason-group.net/wp-content/uploads/2018/03/vault-1.jpg"}})]),a("div",{staticClass:"card-body"},[a("p",{staticClass:"card-text"},[e._v(e._s(t.name))]),a("p",{staticClass:"card-text"},[e._v(e._s(t.description))]),a("button",{staticClass:"btn btn-sm btn-danger",on:{click:function(a){return e.deleteVault(t.id)}}},[e._v("Delete")])])],1)])}))],2)]):e._e()])},U=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[e._v("Create a new Keep")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Keep It!")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-header"},[a("h5",{staticClass:"modal-title",attrs:{id:"exampleModalLongTitle"}},[e._v("Create a new Vault")]),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("span",{attrs:{"aria-hidden":"true"}},[e._v("×")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal-footer"},[a("button",{staticClass:"btn btn-info",attrs:{type:"button","data-dismiss":"modal"}},[e._v("Close")]),a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[e._v("Vault Em!")])])}],N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticClass:"col-12 text-center mt-2"},[a("div",{staticClass:"text-light my-3"},[a("h1",[e._v(e._s(e.activeVault.name))]),a("h3",[e._v(e._s(e.activeVault.description))])]),e.vaultKeeps.length>0?a("div",{staticClass:"row"},e._l(e.vaultKeeps,(function(e,t,s){return a("keep",{key:e.vaultKeepId,attrs:{index:s,keepData:e,canKeep:!1}})})),1):a("div",{staticClass:"row"},[e._m(0)])])])},A=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-12 text-center text-light mt-5"},[a("h3",[e._v("Your Kept keeps will appear here!")])])}],T={name:"Vault",async beforeCreate(){await Object(h["c"])(),this.$store.dispatch("getUserVaults"),this.$store.dispatch("setActiveVault",this.$route.params.vaultId),this.$store.dispatch("getKeepsByVaultId",this.$route.params.vaultId)},computed:{vaultKeeps(){return this.$store.state.vaultKeeps},activeVault(){return this.$store.state.activeVault}},components:{Keep:D}},M=T,B=Object(d["a"])(M,N,A,!1,null,null,null),L=B.exports,S={name:"dashboard",async beforeCreate(){this.$store.dispatch("getPublicKeeps"),await Object(h["c"])(),this.$store.dispatch("setBearer",this.$auth.bearer),this.$store.dispatch("getUserKeeps"),this.$store.dispatch("getUserVaults")},data(){return{newKeep:{name:"",description:"",img:null,isPrivate:!1},newVault:{name:"",description:""}}},mounted(){},methods:{createKeep(){this.$store.dispatch("createKeep",this.newKeep),this.newKeep.img||(this.newKeep.img="https://bonitaselfdefense.com/wp-content/uploads/2017/04/default-image.jpg"),this.newKeep={name:"",description:"",img:null,isPrivate:!1}},createVault(){this.$store.dispatch("createVault",this.newVault),this.newVault={name:"",description:""},console.log(this.$store.state.userVaults)},deleteVault(e){this.$store.dispatch("deleteVault",e)}},computed:{publicKeeps(){return this.$store.state.publicKeeps},userKeeps(){return this.$store.state.userKeeps},userVaults(){return this.$store.state.userVaults}},components:{Keep:D}},R=S,q=(a("2b56"),Object(d["a"])(R,j,U,!1,null,null,null)),W=q.exports;s["a"].use(C["a"]);var z=new C["a"]({routes:[{path:"/",name:"home",component:E},{path:"/dashboard",name:"dashboard",component:W,beforeEnter:h["b"]},{path:"/dashboard/keeps",name:"Dashboard keeps",component:W,beforeEnter:h["b"]},{path:"/dashboard/vaults",name:"Dashboard vaults",component:W,beforeEnter:h["b"]},{path:"/dashboard/vaults/:vaultId",name:"vault view",component:L,beforeEnter:h["b"]}]}),Y=a("2f62");s["a"].use(Y["a"]);let F=location.host.includes("localhost")?"https://localhost:5001/":"/",H=u.a.create({baseURL:F+"api/",timeout:3e3,withCredentials:!0});var J=new Y["a"].Store({state:{publicKeeps:[],userKeeps:[],vaultKeeps:[],userVaults:[],activeVault:{}},mutations:{setPublicKeeps(e,t){e.publicKeeps=t},setUserKeeps(e,t){e.userKeeps=t},addKeep(e,t){e.userKeeps.push(t),t.isPrivate||e.publicKeeps.push(t)},removeKeep(e,t){e.publicKeeps=e.publicKeeps.filter(e=>e.id!=t),e.userKeeps=e.userKeeps.filter(e=>e.id!=t)},setUserVaults(e,t){e.userVaults=t},addVault(e,t){e.userVaults.push(t)},removeVault(e,t){e.userVaults=e.userVaults.filter(e=>e.id!=t)},setActiveVault(e,t){e.activeVault=t},setVaultKeeps(e,t){e.vaultKeeps=t},addVaultKeep(e,t){e.vaultKeeps.push(t)},removeVaultKeep(e,t){e.vaultKeeps=e.vaultKeeps.filter(e=>e.vaultKeepId!=t)}},actions:{setBearer({},e){H.defaults.headers.authorization=e},resetBearer(){H.defaults.headers.authorization=""},async getPublicKeeps({commit:e}){let t=await H.get("keeps");e("setPublicKeeps",t.data)},async getUserKeeps({commit:e}){let t=await H.get("keeps/mykeeps");e("setUserKeeps",t.data)},async createKeep({commit:e},t){let a=await H.post("keeps",t);e("addKeep",a.data)},async deleteKeep({commit:e},t){await H.delete(`keeps/${t}`);e("removeKeep",t)},async updateKeepCounts({commit:e,dispatch:t},a){await H.put(`keeps/${a.id}/counts`,a)},async getUserVaults({commit:e}){let t=await H.get("vaults");e("setUserVaults",t.data)},async createVault({commit:e},t){let a=await H.post("vaults",t);e("addVault",a.data)},async deleteVault({commit:e},t){await H.delete(`vaults/${t}`);e("removeVault",t)},async setActiveVault({commit:e},t){let a=await H.get(`vaults/${t}`);e("setActiveVault",a.data)},async createVaultKeep({commit:e},t){let a=await H.post("vaultkeeps",t);e("addVaultKeep",a.data)},async getKeepsByVaultId({commit:e},t){let a=await H.get(`vaults/${t}/keeps`);e("setVaultKeeps",a.data)},async deleteVaultKeep({commit:e},t){await H.delete(`vaultkeeps/${t}`);e("removeVaultKeep",t)}}});const X="dev-och048iy.auth0.com",Z="https//Keepr.com",G="L6Cp1dehi5y4KqC4DUEzIvOeIjsO2ZmO";s["a"].use(h["a"],{domain:X,clientId:G,audience:Z,onRedirectCallback:e=>{z.push(e&&e.targetUrl?e.targetUrl:window.location.pathname)}}),new s["a"]({router:z,store:J,render:function(e){return e(K)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var s=a("9c0c"),r=a.n(s);r.a},"76eb":function(e,t,a){"use strict";var s=a("c382"),r=a.n(s);r.a},"7e34":function(e,t,a){"use strict";var s=a("f41f"),r=a.n(s);r.a},"9c0c":function(e,t,a){},c382:function(e,t,a){},f41f:function(e,t,a){}});